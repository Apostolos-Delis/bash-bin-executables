#!/usr/bin/env bash

print_help(){
    echo "use version 1.1"
    echo "USAGE: use [-p] <COMMAND>"
    echo "greps history for command usage frequency"
    echo
    echo "flags: "
    echo "      -p: shows a percentage of the commands frequency compared to the entire history"
    echo "      -h/--help: shows the documentation for use"
    echo
    echo "Example: use -p ls    <- shows what percantage of the total commands used was ls"
}

if [ "$#" -ge "1" ]; then
    total=`cat ~/.bash_history | wc -l`
    if [ "$1" = '-p' ]; then
        num_executed=`cat ~/.bash_history | grep "$2" | wc -l`
        echo -n "0"
        bc <<< "scale = 3; ($num_executed / $total)"
    elif [ "$1" = '-h' ] || [ "$1" = '--help' ]; then
        print_help
    else
        num_executed=`cat ~/.bash_history | grep "$1" | wc -l`
        echo "$num_executed"
    fi
else
    print_help
fi
